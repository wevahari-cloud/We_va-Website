{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../src/app/admin/gallery/new/page.tsx","../../../../src/actions/data%3Ab48aa3%20%3Ctext/javascript%3E"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { ImageUpload } from \"@/components/admin/image-upload\";\r\nimport { addGalleryImage } from \"@/actions/gallery\";\r\nimport { toast } from \"sonner\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nconst formSchema = z.object({\r\n    caption: z.string().optional(),\r\n    imageUrl: z.string().min(1, \"Image is required\"),\r\n});\r\n\r\nexport default function NewGalleryPhotoPage() {\r\n    const router = useRouter();\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const form = useForm<z.infer<typeof formSchema>>({\r\n        resolver: zodResolver(formSchema),\r\n        defaultValues: {\r\n            caption: \"\",\r\n            imageUrl: \"\",\r\n        },\r\n    });\r\n\r\n    const onSubmit = async (values: z.infer<typeof formSchema>) => {\r\n        try {\r\n            setLoading(true);\r\n            const result = await addGalleryImage({ imageUrl: values.imageUrl, title: values.caption });\r\n            if (!result.success) throw new Error(result.error);\r\n            toast.success(\"Photo uploaded successfully\");\r\n            router.push(\"/admin/gallery\");\r\n            router.refresh();\r\n        } catch (error) {\r\n            console.error(error);\r\n            toast.error(\"Something went wrong\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-xl mx-auto\">\r\n            <h1 className=\"text-3xl font-bold mb-8\">Upload Photo</h1>\r\n\r\n            <Form {...form}>\r\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"imageUrl\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Photo</FormLabel>\r\n                                <div className=\"text-sm text-muted-foreground mb-4\">\r\n                                    Upload high quality images from your events.\r\n                                </div>\r\n                                <FormControl>\r\n                                    <ImageUpload\r\n                                        value={field.value || \"\"}\r\n                                        disabled={loading}\r\n                                        onChange={(url) => field.onChange(url)}\r\n                                        onRemove={() => field.onChange(\"\")}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"caption\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Caption (Optional)</FormLabel>\r\n                                <FormControl>\r\n                                    <Input disabled={loading} placeholder=\"e.g. Installation Ceremony 2024\" {...field} />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <Button disabled={loading} type=\"submit\" className=\"w-full\">\r\n                        {loading ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\r\n                        Upload\r\n                    </Button>\r\n                </form>\r\n            </Form>\r\n        </div>\r\n    );\r\n}\r\n","/* __next_internal_action_entry_do_not_use__ [{\"404c663949dff536d7117ad4a62f83a61b609de4a1\":\"addGalleryImage\"},\"src/actions/gallery.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var addGalleryImage=/*#__PURE__*/createServerReference(\"404c663949dff536d7117ad4a62f83a61b609de4a1\",callServer,void 0,findSourceMapURL,\"addGalleryImage\");"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"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","ignoreList":[0]}