(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64563,e=>{"use strict";var r=e.i(43476),o=e.i(71645),a=e.i(18566),l=e.i(53145),s=e.i(94814),t=e.i(62201),i=e.i(19455),n=e.i(3133),d=e.i(93479),c=e.i(74556),m=e.i(95187),u=(0,m.createServerReference)("404c663949dff536d7117ad4a62f83a61b609de4a1",m.callServer,void 0,m.findSourceMapURL,"addGalleryImage"),h=e.i(46696),x=e.i(31278);let g=t.object({caption:t.string().optional(),imageUrl:t.string().min(1,"Image is required")});function p(){let e=(0,a.useRouter)(),[t,m]=(0,o.useState)(!1),p=(0,l.useForm)({resolver:(0,s.zodResolver)(g),defaultValues:{caption:"",imageUrl:""}}),j=async r=>{try{m(!0);let o=await u({imageUrl:r.imageUrl,title:r.caption});if(!o.success)throw Error(o.error);h.toast.success("Photo uploaded successfully"),e.push("/admin/gallery"),e.refresh()}catch(e){console.error(e),h.toast.error("Something went wrong")}finally{m(!1)}};return(0,r.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Upload Photo"}),(0,r.jsx)(n.Form,{...p,children:(0,r.jsxs)("form",{onSubmit:p.handleSubmit(j),className:"space-y-8",children:[(0,r.jsx)(n.FormField,{control:p.control,name:"imageUrl",render:({field:e})=>(0,r.jsxs)(n.FormItem,{children:[(0,r.jsx)(n.FormLabel,{children:"Photo"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Upload high quality images from your events."}),(0,r.jsx)(n.FormControl,{children:(0,r.jsx)(c.ImageUpload,{value:e.value||"",disabled:t,onChange:r=>e.onChange(r),onRemove:()=>e.onChange("")})}),(0,r.jsx)(n.FormMessage,{})]})}),(0,r.jsx)(n.FormField,{control:p.control,name:"caption",render:({field:e})=>(0,r.jsxs)(n.FormItem,{children:[(0,r.jsx)(n.FormLabel,{children:"Caption (Optional)"}),(0,r.jsx)(n.FormControl,{children:(0,r.jsx)(d.Input,{disabled:t,placeholder:"e.g. Installation Ceremony 2024",...e})}),(0,r.jsx)(n.FormMessage,{})]})}),(0,r.jsxs)(i.Button,{disabled:t,type:"submit",className:"w-full",children:[t?(0,r.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Upload"]})]})})]})}e.s(["default",()=>p],64563)}]);