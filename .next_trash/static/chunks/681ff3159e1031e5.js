(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31171,e=>{"use strict";let r=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>r])},24687,e=>{"use strict";var r=e.i(43476),t=e.i(75157);function s({className:e,...s}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,t.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},40339,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(19455),i=e.i(16019),l=e.i(74556);let a=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function n({disabled:e,onChange:n,onRemove:o,value:d=[],mainImage:c,onSetMain:m,maxFiles:u=6}){let[x,h]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{h(!0)},[]),x)?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-4 flex items-center gap-4 flex-wrap",children:d.map(e=>(0,r.jsxs)("div",{className:`relative w-[200px] h-[200px] rounded-md overflow-hidden border-2 ${c===e?"border-primary":"border-transparent"}`,children:[(0,r.jsxs)("div",{className:"z-10 absolute top-2 right-2 flex gap-2",children:[m&&(0,r.jsx)(s.Button,{type:"button",onClick:()=>m(e),variant:c===e?"default":"secondary",size:"icon",className:"h-8 w-8",title:"Set as Main Poster",children:(0,r.jsx)(a,{className:`h-4 w-4 ${c===e?"fill-current":""}`})}),(0,r.jsx)(s.Button,{type:"button",onClick:()=>o(e),variant:"destructive",size:"icon",className:"h-8 w-8",children:(0,r.jsx)(i.Trash,{className:"h-4 w-4"})})]}),(0,r.jsx)("img",{className:"object-cover w-full h-full",alt:"Image",src:e}),c===e&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-primary/80 text-primary-foreground text-xs font-bold text-center py-1",children:"Main Poster"})]},e))}),d.length<u&&(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Add images (",d.length,"/",u,")"]}),(0,r.jsx)("div",{className:"w-[200px]",children:(0,r.jsx)(l.ImageUpload,{value:"",disabled:e||d.length>=u,onChange:e=>{n([...d,e])},onRemove:()=>{},aspectRatioLabel:"Free Crop or Original"})})]})]}):null}e.s(["MultiImageUpload",()=>n],40339)},571,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566),i=e.i(53145),l=e.i(94814),a=e.i(62201),n=e.i(19455),o=e.i(3133),d=e.i(93479),c=e.i(24687),m=e.i(67489),u=e.i(46696),x=e.i(31278),h=e.i(40339);let g=a.object({title:a.string().min(2,"Title is required"),date:a.string().min(1,"Date is required"),time:a.string().optional(),venue:a.string().optional(),category:a.string().min(1,"Category is required"),description:a.string().optional(),posterUrl:a.string().min(1,"Poster image is required"),images:a.array(a.string()).optional()});function j({params:a}){let j=(0,s.useRouter)(),[p,v]=(0,t.useState)(!0),f=(0,i.useForm)({resolver:(0,l.zodResolver)(g),defaultValues:{title:"",date:"",time:"",venue:"",category:"",description:"",posterUrl:"",images:[]}});(0,t.useEffect)(()=>{!async function(){try{let r=parseInt(a.id);if(console.log("Checking edit page for ID:",a.id,"Parsed:",r),isNaN(r))return void console.error("Invalid event ID:",a.id);let{getEvent:t}=await e.A(16233),s=await t(r);if(console.log("Fetched event data:",s),s){let e=s.images||[],r=s.posterUrl||"",t=r?[r,...e.filter(e=>e!==r)]:e;f.reset({title:s.title,date:s.date,time:s.time||"",venue:s.venue||"",category:s.category||"",description:s.description||"",posterUrl:r,images:t})}else u.toast.error("Event not found"),j.push("/admin/events")}catch(e){console.error(e),u.toast.error("Error fetching event")}finally{v(!1)}}()},[a.id,f,j]);let b=async r=>{try{v(!0);let{updateEvent:t}=await e.A(16233),s={...r,images:r.images?.filter(e=>e!==r.posterUrl)};if((await t(parseInt(a.id),s)).success)u.toast.success("Event updated successfully"),j.push("/admin/events"),j.refresh();else throw Error("Update failed")}catch(e){console.error(e),u.toast.error("Something went wrong")}finally{v(!1)}};return p?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Event"})}),(0,r.jsx)(o.Form,{...f,children:(0,r.jsxs)("form",{onSubmit:f.handleSubmit(b),className:"space-y-8",children:[(0,r.jsx)(o.FormField,{control:f.control,name:"images",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{children:"Event Images (Max 6)"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Upload images and click the Star icon to set the Main Poster."}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(h.MultiImageUpload,{value:e.value||[],disabled:p,onChange:r=>{e.onChange(r);let t=f.getValues("posterUrl");!(r.length>0)||t&&r.includes(t)||f.setValue("posterUrl",r[0]),0===r.length&&f.setValue("posterUrl","")},onRemove:r=>{let t=e.value?.filter(e=>e!==r)||[];e.onChange(t),f.getValues("posterUrl")===r&&f.setValue("posterUrl",t.length>0?t[0]:"")},mainImage:f.watch("posterUrl"),onSetMain:e=>f.setValue("posterUrl",e),maxFiles:6})}),(0,r.jsx)(o.FormMessage,{})]})}),(0,r.jsx)(o.FormField,{control:f.control,name:"posterUrl",render:()=>(0,r.jsx)(o.FormItem,{className:"hidden",children:(0,r.jsx)(o.FormMessage,{})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsx)(o.FormField,{control:f.control,name:"title",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{children:"Event Title"}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(d.Input,{disabled:p,placeholder:"Title",...e})}),(0,r.jsx)(o.FormMessage,{})]})}),(0,r.jsx)(o.FormField,{control:f.control,name:"category",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{children:"Category"}),(0,r.jsxs)(m.Select,{disabled:p,onValueChange:e.onChange,value:e.value,children:[(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(m.SelectTrigger,{children:(0,r.jsx)(m.SelectValue,{placeholder:"Select category"})})}),(0,r.jsxs)(m.SelectContent,{children:[(0,r.jsx)(m.SelectItem,{value:"Club Service",children:"Club Service"}),(0,r.jsx)(m.SelectItem,{value:"Community Service",children:"Community Service"}),(0,r.jsx)(m.SelectItem,{value:"Professional Service",children:"Professional Service"}),(0,r.jsx)(m.SelectItem,{value:"International Service",children:"International Service"}),(0,r.jsx)(m.SelectItem,{value:"DPP",children:"DPP"}),(0,r.jsx)(m.SelectItem,{value:"District Events",children:"District Events"}),(0,r.jsx)(m.SelectItem,{value:"District Initiatives",children:"District Initiatives"}),(0,r.jsx)(m.SelectItem,{value:"Meetings",children:"Meetings"})]})]}),(0,r.jsx)(o.FormMessage,{})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsx)(o.FormField,{control:f.control,name:"date",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{children:"Date"}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(d.Input,{disabled:p,type:"date",...e})}),(0,r.jsx)(o.FormMessage,{})]})}),(0,r.jsx)(o.FormField,{control:f.control,name:"time",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{children:"Time (Optional)"}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(d.Input,{disabled:p,type:"time",...e})}),(0,r.jsx)(o.FormMessage,{})]})})]}),(0,r.jsx)(o.FormField,{control:f.control,name:"venue",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{children:"Venue (Optional)"}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(d.Input,{disabled:p,placeholder:"Location",...e})}),(0,r.jsx)(o.FormMessage,{})]})}),(0,r.jsx)(o.FormField,{control:f.control,name:"description",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{children:"Description"}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(c.Textarea,{disabled:p,placeholder:"Description",...e})}),(0,r.jsx)(o.FormMessage,{})]})}),(0,r.jsxs)(n.Button,{disabled:p,type:"submit",className:"w-full",children:[p?(0,r.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Update Event"]})]})})]})}e.s(["default",()=>j])},16233,e=>{e.v(r=>Promise.all(["static/chunks/eac45fe0cd571e05.js"].map(r=>e.l(r))).then(()=>r(54705)))}]);