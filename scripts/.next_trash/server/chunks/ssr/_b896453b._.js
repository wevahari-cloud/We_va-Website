module.exports=[4699,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},76325,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(17201),f=a.i(66281);let g=(0,a.i(70106).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function h({disabled:a,onChange:h,onRemove:i,value:j=[],mainImage:k,onSetMain:l,maxFiles:m=6}){let[n,o]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{o(!0)},[]),n)?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-4 flex items-center gap-4 flex-wrap",children:j.map(a=>(0,b.jsxs)("div",{className:`relative w-[200px] h-[200px] rounded-md overflow-hidden border-2 ${k===a?"border-primary":"border-transparent"}`,children:[(0,b.jsxs)("div",{className:"z-10 absolute top-2 right-2 flex gap-2",children:[l&&(0,b.jsx)(d.Button,{type:"button",onClick:()=>l(a),variant:k===a?"default":"secondary",size:"icon",className:"h-8 w-8",title:"Set as Main Poster",children:(0,b.jsx)(g,{className:`h-4 w-4 ${k===a?"fill-current":""}`})}),(0,b.jsx)(d.Button,{type:"button",onClick:()=>i(a),variant:"destructive",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(e.Trash,{className:"h-4 w-4"})})]}),(0,b.jsx)("img",{className:"object-cover w-full h-full",alt:"Image",src:a}),k===a&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-primary/80 text-primary-foreground text-xs font-bold text-center py-1",children:"Main Poster"})]},a))}),j.length<m&&(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Add images (",j.length,"/",m,")"]}),(0,b.jsx)("div",{className:"w-[200px]",children:(0,b.jsx)(f.ImageUpload,{value:"",disabled:a||j.length>=m,onChange:a=>{h([...j,a])},onRemove:()=>{},aspectRatioLabel:"Free Crop or Original"})})]})]}):null}a.s(["MultiImageUpload",()=>h],76325)},61011,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(95245),f=a.i(59501),g=a.i(54714),h=a.i(99570),i=a.i(41921),j=a.i(66718),k=a.i(29246),l=a.i(80701),m=a.i(23292),n=a.i(96221),o=a.i(76325);let p=g.object({title:g.string().min(2,"Title is required"),date:g.string().min(1,"Date is required"),time:g.string().optional(),venue:g.string().optional(),category:g.string().min(1,"Category is required"),description:g.string().optional(),posterUrl:g.string().min(1,"Poster image is required"),images:g.array(g.string()).optional()});function q({params:g}){let q=(0,d.useRouter)(),[r,s]=(0,c.useState)(!0),t=(0,e.useForm)({resolver:(0,f.zodResolver)(p),defaultValues:{title:"",date:"",time:"",venue:"",category:"",description:"",posterUrl:"",images:[]}});(0,c.useEffect)(()=>{!async function(){try{let b=parseInt(g.id);if(console.log("Checking edit page for ID:",g.id,"Parsed:",b),isNaN(b))return void console.error("Invalid event ID:",g.id);let{getEvent:c}=await a.A(94791),d=await c(b);if(console.log("Fetched event data:",d),d){let a=d.images||[],b=d.posterUrl||"",c=b?[b,...a.filter(a=>a!==b)]:a;t.reset({title:d.title,date:d.date,time:d.time||"",venue:d.venue||"",category:d.category||"",description:d.description||"",posterUrl:b,images:c})}else m.toast.error("Event not found"),q.push("/admin/events")}catch(a){console.error(a),m.toast.error("Error fetching event")}finally{s(!1)}}()},[g.id,t,q]);let u=async b=>{try{s(!0);let{updateEvent:c}=await a.A(94791),d={...b,images:b.images?.filter(a=>a!==b.posterUrl)};if((await c(parseInt(g.id),d)).success)m.toast.success("Event updated successfully"),q.push("/admin/events"),q.refresh();else throw Error("Update failed")}catch(a){console.error(a),m.toast.error("Something went wrong")}finally{s(!1)}};return r?(0,b.jsx)("div",{children:"Loading..."}):(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Event"})}),(0,b.jsx)(i.Form,{...t,children:(0,b.jsxs)("form",{onSubmit:t.handleSubmit(u),className:"space-y-8",children:[(0,b.jsx)(i.FormField,{control:t.control,name:"images",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Event Images (Max 6)"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Upload images and click the Star icon to set the Main Poster."}),(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(o.MultiImageUpload,{value:a.value||[],disabled:r,onChange:b=>{a.onChange(b);let c=t.getValues("posterUrl");!(b.length>0)||c&&b.includes(c)||t.setValue("posterUrl",b[0]),0===b.length&&t.setValue("posterUrl","")},onRemove:b=>{let c=a.value?.filter(a=>a!==b)||[];a.onChange(c),t.getValues("posterUrl")===b&&t.setValue("posterUrl",c.length>0?c[0]:"")},mainImage:t.watch("posterUrl"),onSetMain:a=>t.setValue("posterUrl",a),maxFiles:6})}),(0,b.jsx)(i.FormMessage,{})]})}),(0,b.jsx)(i.FormField,{control:t.control,name:"posterUrl",render:()=>(0,b.jsx)(i.FormItem,{className:"hidden",children:(0,b.jsx)(i.FormMessage,{})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsx)(i.FormField,{control:t.control,name:"title",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Event Title"}),(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(j.Input,{disabled:r,placeholder:"Title",...a})}),(0,b.jsx)(i.FormMessage,{})]})}),(0,b.jsx)(i.FormField,{control:t.control,name:"category",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Category"}),(0,b.jsxs)(l.Select,{disabled:r,onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Select category"})})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"Club Service",children:"Club Service"}),(0,b.jsx)(l.SelectItem,{value:"Community Service",children:"Community Service"}),(0,b.jsx)(l.SelectItem,{value:"Professional Service",children:"Professional Service"}),(0,b.jsx)(l.SelectItem,{value:"International Service",children:"International Service"}),(0,b.jsx)(l.SelectItem,{value:"DPP",children:"DPP"}),(0,b.jsx)(l.SelectItem,{value:"District Events",children:"District Events"}),(0,b.jsx)(l.SelectItem,{value:"District Initiatives",children:"District Initiatives"}),(0,b.jsx)(l.SelectItem,{value:"Meetings",children:"Meetings"})]})]}),(0,b.jsx)(i.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsx)(i.FormField,{control:t.control,name:"date",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Date"}),(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(j.Input,{disabled:r,type:"date",...a})}),(0,b.jsx)(i.FormMessage,{})]})}),(0,b.jsx)(i.FormField,{control:t.control,name:"time",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Time (Optional)"}),(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(j.Input,{disabled:r,type:"time",...a})}),(0,b.jsx)(i.FormMessage,{})]})})]}),(0,b.jsx)(i.FormField,{control:t.control,name:"venue",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Venue (Optional)"}),(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(j.Input,{disabled:r,placeholder:"Location",...a})}),(0,b.jsx)(i.FormMessage,{})]})}),(0,b.jsx)(i.FormField,{control:t.control,name:"description",render:({field:a})=>(0,b.jsxs)(i.FormItem,{children:[(0,b.jsx)(i.FormLabel,{children:"Description"}),(0,b.jsx)(i.FormControl,{children:(0,b.jsx)(k.Textarea,{disabled:r,placeholder:"Description",...a})}),(0,b.jsx)(i.FormMessage,{})]})}),(0,b.jsxs)(h.Button,{disabled:r,type:"submit",className:"w-full",children:[r?(0,b.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Update Event"]})]})})]})}a.s(["default",()=>q])},94791,a=>{a.v(b=>Promise.all(["server/chunks/ssr/_0f080b2e._.js"].map(b=>a.l(b))).then(()=>b(92617)))}];

//# sourceMappingURL=_b896453b._.js.map