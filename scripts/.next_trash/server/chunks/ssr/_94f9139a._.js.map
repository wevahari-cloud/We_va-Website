{"version":3,"sources":["../../../../src/actions/events.ts","../../../../.next-internal/server/app/%28public%29/events/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/db\";\r\nimport { events } from \"@/db/schema\";\r\nimport { eq, desc } from \"drizzle-orm\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function getEvents() {\r\n    try {\r\n        const allEvents = await db.select().from(events).orderBy(desc(events.date));\r\n        return allEvents;\r\n    } catch (error) {\r\n        console.error(\"Failed to fetch events:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function addEvent(data: {\r\n    title: string;\r\n    description?: string;\r\n    date: string;\r\n    time?: string;\r\n    venue?: string;\r\n    category?: string;\r\n    posterUrl?: string;\r\n    images?: string[];\r\n}) {\r\n    try {\r\n        await db.insert(events).values(data);\r\n        revalidatePath(\"/events\");\r\n        revalidatePath(\"/admin/events\");\r\n        revalidatePath(\"/gallery\");\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Failed to add event:\", error);\r\n        return { success: false, error: \"Database insert failed\" };\r\n    }\r\n}\r\n\r\nexport async function deleteEvent(id: number) {\r\n    try {\r\n        await db.delete(events).where(eq(events.id, id));\r\n        revalidatePath(\"/events\");\r\n        revalidatePath(\"/admin/events\");\r\n        revalidatePath(\"/gallery\");\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Failed to delete event:\", error);\r\n        return { success: false, error: \"Database delete failed\" };\r\n    }\r\n}\r\n\r\nexport async function getEvent(id: number) {\r\n    try {\r\n        const result = await db.select().from(events).where(eq(events.id, id));\r\n        return result[0];\r\n    } catch (error) {\r\n        console.error(\"Failed to fetch event:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function updateEvent(id: number, data: {\r\n    title: string;\r\n    description?: string;\r\n    date: string;\r\n    time?: string;\r\n    venue?: string;\r\n    category?: string;\r\n    posterUrl?: string;\r\n    images?: string[];\r\n}) {\r\n    try {\r\n        await db.update(events).set(data).where(eq(events.id, id));\r\n        revalidatePath(\"/events\");\r\n        revalidatePath(\"/admin/events\");\r\n        revalidatePath(\"/gallery\");\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Failed to update event:\", error);\r\n        return { success: false, error: \"Database update failed\" };\r\n    }\r\n}\r\n","export {getEvents as '00486a57e5f43d93b55218b61483e00dd113511c1c'} from 'ACTIONS_MODULE0'\nexport {deleteEvent as '40142c92f23600d87e313d4906d006b815904d3584'} from 'ACTIONS_MODULE0'\nexport {getEvent as '404170cce087fcaeaafd4f7c3038e41acafa92fb40'} from 'ACTIONS_MODULE0'\nexport {addEvent as '4061b21cf8ed078670bc8696095231bee6cab6cdf0'} from 'ACTIONS_MODULE0'\nexport {updateEvent as '60835605c79eb40d971fd805d4b5d8e49a37980fe1'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,IAClB,GAAI,CAEA,OAAO,AADW,MAAM,EAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,EAAA,MAAM,EAAE,OAAO,CAAC,CAAA,EAAA,EAAA,IAAA,AAAI,EAAC,EAAA,MAAM,CAAC,IAAI,EAE7E,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,0BAA2B,GAClC,EAAE,AACb,CACJ,CAEO,eAAe,EAAS,CAS9B,EACG,GAAI,CAKA,OAJA,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,EAAA,MAAM,EAAE,MAAM,CAAC,GAC/B,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,WACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,iBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,YACR,CAAE,SAAS,CAAK,CAC3B,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,uBAAwB,GAC/B,CAAE,SAAS,EAAO,MAAO,wBAAyB,CAC7D,CACJ,CAEO,eAAe,EAAY,CAAU,EACxC,GAAI,CAKA,OAJA,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,EAAA,MAAM,EAAE,KAAK,CAAC,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAA,MAAM,CAAC,EAAE,CAAE,IAC5C,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,WACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,iBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,YACR,CAAE,SAAS,CAAK,CAC3B,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,0BAA2B,GAClC,CAAE,SAAS,EAAO,MAAO,wBAAyB,CAC7D,CACJ,CAEO,eAAe,EAAS,CAAU,EACrC,GAAI,CAEA,MADe,AACR,OADc,EAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,EAAA,MAAM,EAAE,KAAK,CAAC,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAA,MAAM,CAAC,EAAE,CAAE,GAAA,CACrD,CAAC,EAAE,AACpB,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,yBAA0B,GACjC,IACX,CACJ,CAEO,eAAe,EAAY,CAAU,CAAE,CAS7C,EACG,GAAI,CAKA,OAJA,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,EAAA,MAAM,EAAE,GAAG,CAAC,GAAM,KAAK,CAAC,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAA,MAAM,CAAC,EAAE,CAAE,IACtD,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,WACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,iBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,YACR,CAAE,SAAS,CAAK,CAC3B,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,0BAA2B,GAClC,CAAE,SAAS,EAAO,MAAO,wBAAyB,CAC7D,CACJ,0CA3EsB,EAUA,EAsBA,EAaA,EAUA,IAvDA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAUA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAsBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAaA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAUA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,iIC9DtB,IAAA,EAAA,EAAA,CAAA,CAAA"}