{"version":3,"sources":["../../../../src/actions/home.ts","../../../../.next-internal/server/app/%28public%29/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/db\";\r\nimport { content } from \"@/db/schema\";\r\nimport { eq } from \"drizzle-orm\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function getHomeContent() {\r\n    try {\r\n        const result = await db.select().from(content).where(eq(content.key, \"home\"));\r\n        if (result.length === 0) return null;\r\n        return result[0].data as any; // Cast JSONB to expected type\r\n    } catch (error) {\r\n        console.error(\"Failed to fetch home content:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function updateHomeContent(data: any) {\r\n    try {\r\n        // Check if exists\r\n        const existing = await db.select().from(content).where(eq(content.key, \"home\"));\r\n\r\n        if (existing.length === 0) {\r\n            await db.insert(content).values({\r\n                key: \"home\",\r\n                data: data,\r\n            });\r\n        } else {\r\n            await db.update(content).set({\r\n                data: data,\r\n                updatedAt: new Date(),\r\n            }).where(eq(content.key, \"home\"));\r\n        }\r\n\r\n        revalidatePath(\"/\");\r\n        return { success: true };\r\n    } catch (error) {\r\n        console.error(\"Failed to update home content:\", error);\r\n        return { success: false, error: \"Database update failed\" };\r\n    }\r\n}\r\n","export {getHomeContent as '003e03a569b78b234c285c38fdbef408a1336139f4'} from 'ACTIONS_MODULE0'\nexport {updateHomeContent as '40e382658da54cd4b11e5972720ecf8e09a75f1fb1'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,IAClB,GAAI,CACA,IAAM,EAAS,MAAM,EAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,EAAA,OAAO,EAAE,KAAK,CAAC,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAA,OAAO,CAAC,GAAG,CAAE,SACrE,GAAsB,IAAlB,EAAO,MAAM,CAAQ,OAAO,KAChC,OAAO,CAAM,CAAC,EAAE,CAAC,IACrB,AADyB,CACvB,CADgC,KACzB,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,CAF8C,+BAEb,GACxC,IACX,CACJ,CAEO,eAAe,EAAkB,CAAS,EAC7C,GAAI,CAEA,IAAM,EAAW,MAAM,EAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,EAAA,OAAO,EAAE,KAAK,CAAC,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAA,OAAO,CAAC,GAAG,CAAE,SAevE,OAbwB,GAAG,CAAvB,EAAS,MAAM,CACf,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,EAAA,OAAO,EAAE,MAAM,CAAC,CAC5B,IAAK,OACL,KAAM,CACV,GAEA,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,EAAA,OAAO,EAAE,GAAG,CAAC,CACzB,KAAM,EACN,UAAW,IAAI,IACnB,GAAG,KAAK,CAAC,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAA,OAAO,CAAC,GAAG,CAAE,SAG7B,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,KACR,CAAE,QAAS,EAAK,CAC3B,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,iCAAkC,GACzC,CAAE,SAAS,EAAO,MAAO,wBAAyB,CAC7D,CACJ,0CAlCsB,EAWA,IAXA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAWA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,sFClBtB,IAAA,EAAA,EAAA,CAAA,CAAA"}